install.packages(c("remotes", "knitr", "rmarkdown"))
install.packages(c("remotes", "knitr", "rmarkdown"))
remotes::install_git("https://code.usgs.gov/usgs/norock/cross_p/cwdsims", build_vignettes = TRUE, build_manual = TRUE)
remotes::install_git("https://code.usgs.gov/usgs/norock/cross_p/cwdsims", build_vignettes = F, build_manual = TRUE)
library(CWDsims)
vignette(package = "CWDsims") # all vignettes available
vignette("CWDsimsIntroVignette") # load the introduction
?CWDsims
library(knitr)
library(CWDsims)
options(continue=" ")
options(width=60)
knitr::opts_chunk$set(echo = TRUE,
warning = FALSE,
message = FALSE,
fig.height = 4,
fig.width = 6)
params <- list(fawn.an.sur = 0.6, juv.an.sur = 0.8, ad.an.f.sur = 0.9,
ad.an.m.sur = 0.9, fawn.repro = 0, juv.repro = 0.6,
ad.repro = 1, hunt.mort.fawn = 0.01, hunt.mort.juv.f = 0.1,
hunt.mort.juv.m = 0.1, hunt.mort.ad.f = 0.1,
hunt.mort.ad.m = 0.2, ini.fawn.prev = 0.01, ini.juv.prev = 0.03,
ini.ad.f.prev = 0.04, ini.ad.m.prev = 0.04, n.age.cats = 12,
p = 0.43, env.foi = 0, beta.f = 0.08, beta.m = 0.08, theta = 1,
n0 = 1000, n.years = 10, rel.risk = 1.0)
# run the deterministic CWD model
out <- cwd_det_model(params)
summary(out)
head(out$counts)
head(out$deaths)
unique(out$deaths$category)
plot_tots(out$counts)
plot_prev_time(out$counts)
plot_prev_age_end(out$counts)
plot_age_dist(out$counts)
plot_deaths(out$deaths, percents = TRUE)
params.stoch <- list(fawn.an.sur = 0.6, juv.an.sur = 0.8, ad.an.f.sur = 0.95,
ad.an.m.sur = 0.9, fawn.repro = 0, juv.repro = 0.6, ad.repro = 1,
hunt.mort.fawn = 0.01, hunt.mort.juv.f = 0.1, hunt.mort.juv.m = 0.1,
hunt.mort.ad.f = 0.1, hunt.mort.ad.m = 0.2, ini.fawn.prev = 0.02,
ini.juv.prev = 0.03, ini.ad.f.prev = 0.04,  ini.ad.m.prev = 0.04,
n.age.cats = 12,  p = 0.43, env.foi = 0,  beta.f = 0.08,  beta.m = 0.08,
theta = 1, n0 = 1000, n.years = 10, rel.risk = 1.0,
repro.var = 0.005, fawn.sur.var = 0.005, sur.var = 0.005, hunt.var = 0.005)
out.stoch<- cwd_stoch_model(params.stoch)
plot_tots(out.stoch$counts)
out.wrap <- cwd_stoch_wrapper(params.stoch, nsims = 30)
out.wrap <- cwd_stoch_wrapper(params.stoch, nsims = 30)
plot_stoch_tots(out.wrap$counts, all.lines = TRUE, error.bars = c(0.05, 0.95),
by.sexage = TRUE)
plot_stoch_deaths(out.wrap$deaths, error.bars = c(0.05, 0.95))
params.wiw <- list(fawn.an.sur = 0.6, juv.an.sur = 0.8, ad.an.f.sur = 0.95,
ad.an.m.sur = 0.9, fawn.repro = 0, juv.repro = 0.6, ad.repro = 1,
hunt.mort.fawn = 0.01, hunt.mort.juv.f = 0.1, hunt.mort.juv.m = 0.1,
hunt.mort.ad.f = 0.1, hunt.mort.ad.m = 0.2, ini.fawn.prev = 0.02,
ini.juv.prev = 0.03, ini.ad.f.prev = 0.04,  ini.ad.m.prev = 0.04,
n.age.cats = 12,  p = 0.43, env.foi = 0,  beta.ff = 0.06,
gamma.mm = 2, gamma.mf = 2, gamma.fm = 1,
theta = 1, n0 = 2000, n.years = 10, rel.risk = 1.0)
out.wiw <- cwd_det_model_wiw(params.wiw)
plot_tots(out.wiw$counts)
params1 <- list(fawn.an.sur = 0.6, juv.an.sur = 0.8, ad.an.f.sur = 0.9,
ad.an.m.sur = 0.9, fawn.repro = 0, juv.repro = 0.6,
ad.repro = 1, hunt.mort.fawn = 0.01, hunt.mort.juv.f = 0.1,
hunt.mort.juv.m = 0.1, hunt.mort.ad.f = 0.1,
hunt.mort.ad.m = 0.2, ini.fawn.prev = 0.01, ini.juv.prev = 0.03,
ini.ad.f.prev = 0.04, ini.ad.m.prev = 0.04, n.age.cats = 12,
p = 0.43, env.foi = 0, beta.f = 0.08, beta.m = 0.08, theta = 1,
n0 = 1000, n.years = 10, rel.risk = 1.0)
# alter the male and female hunting rate for the 2nd scenario
params2 <- params1
params2$hunt.mort.ad.m <- 0.5
params2$hunt.mort.ad.f <- 0
out1 <- cwd_det_model(params1)
out2 <- cwd_det_model(params2)
plot_compare_all_det(out1, out2)
params.s1 <- list(fawn.an.sur = 0.6, juv.an.sur = 0.8, ad.an.f.sur = 0.95,
ad.an.m.sur = 0.9, fawn.repro = 0, juv.repro = 0.6, ad.repro = 1,
hunt.mort.fawn = 0.01, hunt.mort.juv.f = 0.1, hunt.mort.juv.m = 0.1,
hunt.mort.ad.f = 0.1, hunt.mort.ad.m = 0.2, ini.fawn.prev = 0.02,
ini.juv.prev = 0.03, ini.ad.f.prev = 0.04,  ini.ad.m.prev = 0.04,
n.age.cats = 12,  p = 0.43, env.foi = 0,  beta.f = 0.08,  beta.m = 0.08,
theta = 1, n0 = 1000, n.years = 10, rel.risk = 1.0,
repro.var = 0.005, fawn.sur.var = 0.005, sur.var = 0.005, hunt.var = 0.005)
# alter the male and female hunting rate for the 2nd scenario
params.s2 <- params.s1
params.s2$hunt.mort.ad.m <- 0.5
params.s2$hunt.mort.ad.f <- 0.01
# use the wrapper for this comparison
out.s1 <- cwd_stoch_wrapper(params.s1, nsims = 20)
# use the wrapper for this comparison
out.s1 <- cwd_stoch_wrapper(params.s1, nsims = 20)
out.s2 <- cwd_stoch_wrapper(params.s2, nsims = 20)
plot_compare_all_stoch(out.s1, out.s2)
?plot_age_dist
plot_age_dist(out$counts)
source("D:/Current Projects/GitLab/norock/cwdsims/R/plot_age_dist.r")
plot_age_dist(out$counts)
library(tidyverse)
plot_age_dist(out$counts)
